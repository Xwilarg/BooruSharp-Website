<!DOCTYPE html>
<html>
    <head>
        <title>BooruSharp</title>
        <link rel="stylesheet" type="text/css" href="css/index.css">
        <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    </head>
    <body>
        <div id="sideMenu">
            <a href="#welcome">Introduction</a>
            <a href="#migrating">From 1.4.8 to 2.0.0</a>
            <a href="#quickStart">Quick Start</a>
            <a href="#featureList">Feature list</a>
            <a href="#instantiate">Instantiate boorus</a>
            <a href="#authentification">Authentification</a>
            <a href="#inheritance">Create your own booru</a>
            <a href="#exception">Exception thrown</a>
            <a href="#general">General functions</a>
            <a href="#post">Post functions</a>
            <a href="#comment">Comment functions</a>
            <a href="#tag">Tag functions</a>
            <a href="#related">Related functions</a>
            <a href="#wiki">Wiki functions</a>
            <a href="#favorite">Favorite functions</a>
        </div>
        <div id="content">
            <h2 id="welcome">Welcome on BooruSharp 2.7.0 documentation.</h2>
            BooruSharp is a C# library allowing you to get images from Booru websites. BooruSharp currently handle the following websites:
            <ul>
                <li>booru.allthefallen.moe</li>
                <li>danbooru.donmai.us</li>
                <li>e621.net</li>
                <li>e926.net</li>
                <li>furry.booru.org</li>
                <li>gelbooru.com</li>
                <li>konachan.com</li>
                <li>lolibooru.moe</li>
                <li>realbooru.com</li>
                <li>rule34.xxx</li>
                <li>safebooru.org</li>
                <li>sakugabooru.com</li>
                <li>beta.sankakucomplex.com</li>
                <li>xbooru.com</li>
                <li>yande.re</li>
            </ul>
            <br/>
            The project is available on GitHub at <a href="https://github.com/Xwilarg/BooruSharp">https://github.com/Xwilarg/BooruSharp</a><br/>
            And on NuGet at <a href="https://www.nuget.org/packages/BooruSharp/">https://www.nuget.org/packages/BooruSharp/</a><br/>
            If you need additional help you can come ask your questions on <a href="https://discord.gg/H6wMRYV">Discord</a> or open an issue on <a href="https://github.com/Xwilarg/BooruSharp/issues">GitHub</a><br/>
            <br/>
            This documentation is for the version 2.7.0. For the version 1.4.8, please refer to the old one: <a href="https://github.com/Xwilarg/BooruSharp/wiki">https://github.com/Xwilarg/BooruSharp/wiki</a><br/>
            <br/>
            <hr/>
            <h2 id="migrating">Migrating from 1.4.8 to 2.0.0</h2>
            See the <a href="transition.html">transition guide</a>.<br/>
            <br/>
            <hr/>
            <h2 id="quickStart">Quick Start</h2>
            To begin with you must instantiate a new Booru, they are in the namespace BooruSharp.Booru<br/>
            <pre class="prettyprint">var booru = new BooruSharp.Booru.Gelbooru();</pre>
            Then you can use all the different functions from it:
            <pre class="prettyprint">
var result = booru.GetRandomImageAsync("kantai_collection");
Console.WriteLine(result.fileUrl);</pre>
            You can scroll bellow to see the different functions available.<br/>
            <br/>
            <hr/>
            <h2 id="featureList">Feature list</h2>
            <table>
                <thead>
                    <tr>
                        <th>Booru</th>
                        <th>Multiple Random Images</th>
                        <th>Post by ID</th>
                        <th>Post by MD5</th>
                        <th>Tag by ID</th>
                        <th>Comment API</th>
                        <th>Last Comments API</th>
                        <th>Wiki API</th>
                        <th>Related Tag API</th>
                        <th>Post Count API</th>
                        <th>Favorite API</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Atfbooru</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>Danbooru Donmai</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>E621</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>E926</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>Furry Booru</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                    </tr>
                    <tr>
                        <td>Gelbooru</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                    </tr>
                    <tr>
                        <td>Konachan</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>Lolibooru</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>Realbooru</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                    </tr>
                    <tr>
                        <td>Rule 34</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                    </tr>
                    <tr>
                        <td>Safebooru</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                    </tr>
                    <tr>
                        <td>Sakugabooru</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>Sankaku Complex</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>❌</td>
                    </tr>
                    <tr>
                        <td>Xbooru</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                    </tr>
                    <tr>
                        <td>Yandere</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>✔️</td>
                        <td>❌</td>
                    </tr>
                </tbody>
            </table>
            <br/><br/>
            <hr/>
            <h2 id="instantiate">Instantiate boorus</h2>
            There are several boorus you can use, here are the ways the instantiate them:
            <pre class="prettyprint">
new Atfbooru();
new DanbooruDonmai();
new E621();
new E926();
new Furrybooru();
new Gelbooru();
new Konachan();
new Lolibooru();
new Realbooru();
new Rule34();
new Safebooru();
new Sakugabooru();
new SankakuComplex();
new Xbooru();
new Yandere();</pre><br/>
            <br/>
            <hr/>
            <h2 id="authentification">Authentification</h2>
            You might need authentification for some services (like the favorites)<br/>
            To do that, you need to create a new BooruAuth:
            <pre class="prettyprint">
new BooruAuth(string userId, string passwordHash);</pre><br/>
            Then to pass it to your booru using SetBooruAuth:
            <pre class="prettyprint">
booru.SetBooruAuth(BooruAuth auth);</pre><br/>
            Getting your user ID and your password hash can be fairly annoying, I would advice you to go on any image of the booru you want this information, to open the developer pannel (F12) and go in the "Network" tab.<br/>
            Then press the button to add the image to your favorite and look at the last request in the "Cookies" section.<br/>
            <img src="img/auth.png" alt="Authentification explanations"/>
            <br/>
            <hr/>
            <h2 id="inheritance">Create your own booru</h2>
            To create your own booru, you need to inherit one of the class in BooruSharp.Booru.Template.<br/>
            Each booru take in parameters the base URL of the website and some BooruOptions (optional).<br/>
            The templates are:
            <ul>
                <li>Danbooru: Based on Danbooru Donmai</li>
                <li>E621: Based on E621</li>
                <li>Gelbooru: Based on Gelbooru</li>
                <li>Gelbooru02: Based on Gelbooru 0.2</li>
                <li>Moebooru: Based on Moebooru</li>
                <li>Sankaku: Based on Sankaku Channel</li>
            </ul>
            Here's an example with Safebooru (https://safebooru.org/):
<pre class="prettyprint">public sealed class Safebooru() : base("safebooru.org", BooruOptions.noComment)</pre>
            Please notice that we didn't put the "https://" at the beginning of the url and that it also doesn't end with a "/".<br/>
            BooruOptions are settings to precise the behaviour of your booru.<br/>
            Templates probably already gives most of the options you need so you don't have to think too much about them.
            <ul>
                <li>useHttp: Use HTTP instead of HTTPS to do requests</li>
                <li>noWiki: Wiki not available for this booru</li>
                <li>noRelated: Related tags not available for this booru</li>
                <li>noComment: Comments not available for this booru</li>
                <li>noTagById: Tags can't be searched by ID for this booru</li>
                <li>noPostByMd5: Posts can't be searched by their MD5</li>
                <li>noLastComments: Can't get list of all lasts comments for this booru</li>
                <li>commentApiXml: Comment API can't be contacted using JSON</li>
                <li>tagApiXml: Tag API can't be contacted using JSON</li>
                <li>limitOf20000: Only for Gelbooru and Gelbooru02 template, limit of 20 000 posts per requests</li>
            </ul>
            If you need to modify how your booru parse the search, you can override one of the following methods:          
<pre class="prettyprint">protected internal virtual Search.Comment.SearchResult GetCommentSearchResult(object json);
protected internal virtual Search.Post.SearchResult GetPostSearchResult(JToken obj);
protected internal virtual Search.Post.SearchResult[] GetPostsSearchResult(object json);
protected internal virtual JToken ParseFirstPostSearchResult(object json);
protected internal virtual Search.Related.SearchResult GetRelatedSearchResult(object json);
protected internal virtual Search.Tag.SearchResult GetTagSearchResult(object json);
protected internal virtual Search.Wiki.SearchResult GetWikiSearchResult(object json);</pre>
            Feel free to check how it's done in <a href="https://github.com/Xwilarg/BooruSharp/tree/master/BooruSharp/Booru/Template">the template classes</a> to understand how to do it.
            <br/>
            <hr/>
            <h2 id="exception">Exception thrown</h2>
            <ul>
                <li>Search.FeatureUnavailable: This function is not available for this booru (see above)</li>
                <li>Search.InvalidTags: There is no image with the tags you provided</li>
                <li>Search.AuthentificationInvalid: The credentials you provided are invalid</li>
                <li>Search.InvalidPostId: There is no post with this ID (only for favorites)</li>
                <li>Search.TooManyTags: You can't provide more than 2 tags for this booru</li>
                <li>Search.AuthentificationRequired: You must authentificate before using this feature. See <a href="#authentification">the authentification section</a></li>
            </ul>
            <br/><br/>
            <hr/>
            <h2 id="general">General functions</h2>
            HttpClient is what is used by BooruSharp for the API requests, if you don't use this property, a new one will automatically be created
<pre class="prettyprint">public HttpClient HttpClient { set; private get; }</pre><br/>
            BooruAuth allow to authentificate to a booru, see <a href="https://boorusharp.zirk.eu/#authentification">https://boorusharp.zirk.eu/#authentification</a>
<pre class="prettyprint">public BooruAuth Auth { set; get; }</pre><br/>
            HasRelatedAPI returns if the booru has a "tag related" API
<pre class="prettyprint">bool HasRelatedAPI();</pre><br/>
            HasWikiAPI returns if the booru has a "wiki" API
<pre class="prettyprint">bool HasWikiAPI();</pre><br/>
            HasCommentAPI returns if the booru has a "comment" API
<pre class="prettyprint">bool HasCommentAPI();</pre><br/>
            HasTagByIdAPI returns if the booru has a can search tags by ID
<pre class="prettyprint">bool HasTagByIdAPI();</pre><br/>
            HasSearchLastComment returns if the booru can search for all last comments
<pre class="prettyprint">bool HasSearchLastComment();</pre><br/>
            HasPostByMd5API returns if the booru can search post using this MD5
<pre class="prettyprint">bool HasPostByMd5API();</pre><br/>
            HasPostByMd5API returns if the booru can search post using this MD5
<pre class="prettyprint">bool HasPostById();</pre><br/>
            HasPostCountAPI returns if the booru can return the total number of images it has given some tags
<pre class="prettyprint">bool HasPostCountAPI();</pre><br/>
            HasMultipleRandomAPI returns if can search multiple random images at once
<pre class="prettyprint">bool HasMultipleRandomAPI();</pre><br/>
            HasFavoriteAPI returns if the booru can add/remove favorite
<pre class="prettyprint">bool HasFavoriteAPI();</pre><br/>
            CheckAvailabilityAsync check if the booru is avaiable, throw a HttpRequestException if not
<pre class="prettyprint">async Task CheckAvailabilityAsync();</pre><br/>
            <hr/>
            <h2 id="post">Post functions</h2>
            GetImageByMd5Async returns a post given it MD5 hash
<pre class="prettyprint">async Task&lt;Search.Post.SearchResult&gt; GetImageByMd5Async(string md5);</pre><br/>
            GetImageByIdAsync returns a post given it ID hash
<pre class="prettyprint">async Task&lt;Search.Post.SearchResult&gt; GetImageByIdAsync(int id);</pre><br/>
            GetRandomImageAsync returns a random post. Tags can be given in parameters
<pre class="prettyprint">async Task&lt;Search.Post.SearchResult&gt; GetRandomImageAsync(params string[] tagsArg);</pre><br/>
            GetLastImagesAsync all the post on the first page. Tags can be given in parameters
<pre class="prettyprint">async Task&lt;Search.Post.SearchResult[]&gt; GetLastImagesAsync(params string[] tagsArg);</pre><br/>
            <br/>
            <h3>Search.Post.SearchResult is defined by the following struct</h3>
            Url of the image
<pre class="prettyprint">Uri fileUrl</pre><br/>
            Preview url of the image
<pre class="prettyprint">Uri previewUrl</pre><br/>
            The url of the post
<pre class="prettyprint">Uri postUrl</pre><br/>
            Is the image safe or not
<pre class="prettyprint">Rating rating
enum Rating
{
    Safe,
    Questionable,
    Explicit
}</pre><br/>
            All the tags contained in the image
<pre class="prettyprint">string[] tags</pre><br/>
            Id of the image
<pre class="prettyprint">int id</pre><br/>
            Size in octets of the image
<pre class="prettyprint">int? size</pre><br/>
            Height in pixels of the image
<pre class="prettyprint">int height</pre><br/>
            Width in pixels of the image
<pre class="prettyprint">int width</pre><br/>
            Height in pixels of the preview image
<pre class="prettyprint">int? previewHeight</pre><br/>
            Width in pixels of the preview image
<pre class="prettyprint">int previewWidth</pre><br/>
            Wehn the post was created
<pre class="prettyprint">DateTime? creation</pre><br/>
            Where the image is coming from
<pre class="prettyprint">string source</pre><br/>
            Score of the image
<pre class="prettyprint">int score</pre><br/>
            Hash (md5) of the image
<pre class="prettyprint">string md5</pre><br/>
            <hr/>
            <h2 id="comment">Comment functions</h2>
            GetCommentsAsync return the comment of a post given it id
<pre class="prettyprint">async Task&lt;Search.Comment.SearchResult&gt; GetCommentsAsync(int postId);</pre><br/>
            GetLastsCommentsAsync return the lasts comments posted on the website
<pre class="prettyprint">async Task&lt;Search.Comment.SearchResult&gt; GetLastsCommentsAsync();</pre><br/>
            <br/>
            <h3>Search.Comment.SearchResult is defined by the following struct</h3>
            Id of the comment
<pre class="prettyprint">int commentId</pre><br/>
            Id of the image associated with the comment
<pre class="prettyprint">int postId</pre><br/>
            Id of the author of the comment, is null if the author is anonymous
<pre class="prettyprint">int? authorId</pre><br/>
            When the comment was posted
<pre class="prettyprint">DateTime creation</pre><br/>
            Name of the author of the comment
<pre class="prettyprint">string authorName</pre><br/>
            Comment's message
<pre class="prettyprint">string body</pre><br/>
            <hr/>
            <h2 id="tag">Tag functions</h2>
            GetTagAsync return a tag given it name
<pre class="prettyprint">async Task&lt;Search.Tag.SearchResult&gt; GetTagAsync(string name);</pre><br/>
            GetTagAsync return a tag given it id
<pre class="prettyprint">async Task&lt;Search.Tag.SearchResult&gt; GetTagAsync(int id);</pre><br/>
            GetTagsAsync return the similar tags of the one given in parameter
<pre class="prettyprint">async Task&lt;Search.Tag.SearchResult[]&gt; GetTagsAsync(string name);</pre><br/>
            <br/>
            <h3>Search.Tag.SearchResult is defined by the following struct</h3>
            Id of the tag
<pre class="prettyprint">int id</pre><br/>
            Name of the tag
<pre class="prettyprint">string name</pre><br/>
            Type of the tag (character, copyright, etc...)
<pre class="prettyprint">TagType tag
enum TagType
{
    Trivia,
    Artist,
    Copyright = 3,
    Character,
    Metadata
}</pre><br/>
            Number of occurences of the tag
<pre class="prettyprint">int count</pre><br/>
            <hr/>
            <h2 id="related">Related functions</h2>
            GetRelatedAsync return the tags related to the one given in parameter
<pre class="prettyprint">async Task&lt;Search.Related.SearchResult[]&gt; GetRelatedAsync(string tag);</pre><br/>
            <br/>
            <h3>Search.Related.SearchResult is defined by the following struct</h3>
            Name of the tag
<pre class="prettyprint">string name</pre><br/>
            Number of occurences of the tag
<pre class="prettyprint">int? count</pre><br/>
            <hr/>
            <h2 id="wiki">Wiki functions</h2>
            GetWikiAsync return a wiki page
<pre class="prettyprint">async Task&lt;Search.Wiki.SearchResult&gt; GetWikiAsync(string query);</pre><br/>
            <br/>
            <h3>Search.Wiki.SearchResult is defined by the following struct</h3>
            Id of the wiki entry
<pre class="prettyprint">int id</pre><br/>
            Name of the tag described
<pre class="prettyprint">string title</pre><br/>
            Date when the entry was created
<pre class="prettyprint">DateTime creation</pre><br/>
            Date of the latest update to the entry
<pre class="prettyprint">DateTime lastUpdate</pre><br/>
            Tag description
<pre class="prettyprint">string body</pre><br/>
            <br/>
            <hr/>
            <h2 id="favorite">Favorite functions</h2>
            You must be authentificated to use favorite functions (see <a href="#authentification">authentification</a>)<br/><br/>
            AddFavoriteAsync add a comment to favorite given some tags
<pre class="prettyprint">async Task AddFavoriteAsync(int postId);</pre><br/>
            RemoveFavoriteAsync add a comment to favorite given some tags
            <pre class="prettyprint">async Task RemoveFavoriteAsync(int postId);</pre><br/>
            <br/>
            <hr/>
        </div>
    </body>
</html>